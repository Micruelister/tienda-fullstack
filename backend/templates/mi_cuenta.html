<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css') }}">
    <title>Mi Cuenta</title>
</head>
<body>
    <header>
        <a href="{{ url_for('hola_mundo') }}"><h1>Mi Tienda Online</h1></a>
    </header>
    <main>
        <h2>Mi Cuenta</h2>

        <!-- Sección de Información del Usuario -->
        <div class="user-info-card">
            <h3>Información de la Cuenta</h3>
            <p><strong>Nombre de Usuario:</strong> {{ usuario.username }}</p>
            <p><strong>Correo Electrónico:</strong> {{ usuario.email }}</p>
            <!-- Aquí es donde en el futuro podríamos añadir un botón de "Editar Perfil" -->
        </div>

        <!-- Sección del Historial de Pedidos -->
        <div class="order-history">
            <h3>Mi Historial de Pedidos</h3>
            {% if pedidos %}
                {% for pedido in pedidos %}
                    <div class="pedido-card">
                        <h4>Pedido #{{ pedido.id }}</h4>
                        <p><strong>Fecha:</strong> {{ pedido.fecha.strftime('%d-%m-%Y %H:%M') }}</p>
                        <p><strong>Dirección de Envío:</strong> {{ pedido.direccion_envio }}</p>
                        <ul>
                            {% for item in pedido.productos %}
                                <li>{{ item.producto.nombre }} (x{{ item.cantidad }})</li>
                            {% endfor %}
                        </ul>
                        <p class="pedido-total"><strong>Total del Pedido: ${{ "%.2f"|format(pedido.total) }}</strong></p>
                    </div>
                {% endfor %}
            {% else %}
                <p>Todavía no has realizado ningún pedido.</p>
            {% endif %}
        </div>
    </main>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>